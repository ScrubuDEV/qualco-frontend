<!-- Countries List Page -->
<div class="min-h-screen bg-gray-50 py-8">
  <div class="max-w-4xl mx-auto px-4">
    <div class="text-3xl font-bold text-gray-900 mb-8 text-center">
      {{ "NATIONS-countries.list.title" | translate }}
    </div>

    <div class="bg-white rounded-lg shadow-md overflow-hidden">
      <div class="px-6 py-4 bg-indigo-600 text-white">
        <div class="text-xl font-semibold">
          {{ "NATIONS-countries.list.subtitle" | translate }}
        </div>
        <ng-container *ngIf="viewModel$ | async as vm">
          <p class="text-indigo-100 mt-1" *ngIf="vm.hasItems">
            {{
              "NATIONS-countries.list.found"
                | translate: { count: vm.itemCount }
            }}
          </p>
          <p class="text-indigo-100 mt-1" *ngIf="!vm.hasItems && vm.isReady">
            {{ "NATIONS-countries.list.noCountries" | translate }}
          </p>
        </ng-container>
      </div>

      <div class="p-6">
        <!-- Loading State -->
        <ng-container *ngIf="viewModel$ | async as vm">
          <div *ngIf="vm.loading" class="text-center py-8">
            <div
              class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"
            ></div>
            <p class="mt-2 text-gray-600">
              {{ "NATIONS-loading.countries" | translate }}
            </p>
          </div>

          <!-- Error State -->
          <div *ngIf="vm.hasError && !vm.loading" class="text-center py-8">
            <div class="text-red-600 mb-2">
              <svg
                class="mx-auto h-12 w-12"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.962-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"
                />
              </svg>
            </div>
            <p class="text-red-600">{{ vm.error || "" | translate }}</p>
            <button
              (click)="retry()"
              class="mt-4 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition-colors"
            >
              {{ "NATIONS-error.retry" | translate }}
            </button>
          </div>

          <!-- Countries List -->
          <ol class="space-y-4" *ngIf="!vm.loading && !vm.hasError">
            <li
              *ngFor="let countryItem of vm.items; let i = index"
              class="flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 hover:border-indigo-300 cursor-pointer transition-all duration-200"
              (click)="navigateToCountryLanguages(countryItem)"
            >
              <div class="flex items-center space-x-4">
                <div
                  class="text-lg font-medium text-indigo-600 bg-indigo-100 w-8 h-8 rounded-full flex items-center justify-center"
                >
                  {{ getGlobalIndex(i, vm.paginationConfig.currentPage, vm.paginationConfig.pageSize) }}
                </div>
                <div>
                  <div class="text-lg font-semibold text-gray-900">
                    {{ countryItem.name }}
                  </div>
                  <div class="text-sm text-gray-600">
                    {{ "NATIONS-table.code" | translate }}:
                    {{ countryItem.countryCode2 }}
                  </div>
                </div>
              </div>
              <div class="text-right">
                <div class="text-sm text-gray-600">
                  {{ "NATIONS-table.area" | translate }}
                </div>
                <div class="text-lg font-medium text-gray-900">
                  {{ countryItem.area | number }} kmÂ²
                </div>
              </div>
            </li>
          </ol>

          <div
            *ngIf="!vm.loading && !vm.hasError && !vm.hasItems"
            class="text-center py-8"
          >
            <p class="text-gray-600">
              {{ "NATIONS-countries.list.noCountries" | translate }}
            </p>
          </div>

          <div
            *ngIf="
              !vm.loading &&
              !vm.hasError &&
              vm.paginationConfig &&
              vm.itemCount > 0
            "
            class="border-t border-gray-200 p-4"
          >
            <app-pagination
              [config]="vm.paginationConfig"
              (pageChange)="onPageChange($event)"
              (pageSizeChange)="onPageSizeChange($event)"
            ></app-pagination>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</div>
