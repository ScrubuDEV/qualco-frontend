<div class="min-h-screen bg-gray-50 py-8">
  <div class="max-w-7xl mx-auto px-4">
    <div class="text-3xl font-bold text-gray-900 mb-8 text-center">
      {{ "NATIONS-table.searchFilters" | translate }}
    </div>
    <div class="bg-white rounded-lg shadow-md overflow-hidden">
      <div class="px-6 py-4 bg-indigo-600 text-white">
        <div class="text-xl font-semibold">{{ "NATIONS-table.searchFilters" | translate }}</div>
        <p class="text-indigo-100 mt-1">
          {{ "NATIONS-table.filterByRegionYear" | translate }}
        </p>
      </div>
      <ng-container *ngIf="regions$ | async as regions">
        <div class="p-6 flex flex-wrap gap-6 items-end bg-gray-50">
          <div class="flex flex-col">
            <label
              for="region"
              class="block text-sm font-medium mb-1 text-gray-700"
              >{{ "NATIONS-filter.region" | translate }}</label
            >
            <select
              id="region"
              class="border border-gray-300 rounded px-3 py-2 bg-white focus:ring-indigo-500 focus:border-indigo-500"
              [(ngModel)]="filters.region"
              name="region"
              (ngModelChange)="onFilterChange(regions)"
            >
              <option value="">{{ "NATIONS-filter.allRegions" | translate }}</option>
              <option *ngFor="let region of regions" [value]="region.id">
                {{ region.name }}
              </option>
            </select>
          </div>
          <div class="flex flex-col">
            <label
              for="yearFrom"
              class="block text-sm font-medium mb-1 text-gray-700"
              >{{ "NATIONS-filter.yearFrom" | translate }}</label
            >
            <input
              id="yearFrom"
              type="number"
              class="border border-gray-300 rounded px-3 py-2 w-28 focus:ring-indigo-500 focus:border-indigo-500"
              [(ngModel)]="filters.yearFrom"
              name="yearFrom"
              [min]="(yearRange$ | async)?.minYear ?? 1900"
              [max]="(yearRange$ | async)?.maxYear ?? 2100"
              (ngModelChange)="onFilterChange(regions)"
            />
          </div>
          <div class="flex flex-col">
            <label
              for="yearTo"
              class="block text-sm font-medium mb-1 text-gray-700"
              >{{ "NATIONS-filter.yearTo" | translate }}</label
            >
            <input
              id="yearTo"
              type="number"
              class="border border-gray-300 rounded px-3 py-2 w-28 focus:ring-indigo-500 focus:border-indigo-500"
              [(ngModel)]="filters.yearTo"
              name="yearTo"
              [min]="(yearRange$ | async)?.minYear ?? 1900"
              [max]="(yearRange$ | async)?.maxYear ?? 2100"
              (ngModelChange)="onFilterChange(regions)"
            />
          </div>
        </div>
      </ng-container>
      <div class="p-6">
        <ng-container *ngIf="viewModel$ | async as vm">
          <ng-container *ngIf="vm.hasItems; else noData">
            <div class="overflow-x-auto w-full h-full" style="height: 100%">
              <div style="width: 100%; height: 100%; overflow: auto">
                <table
                  class="w-full h-full bg-white border border-gray-200 rounded-lg overflow-hidden text-xs"
                  style="
                    table-layout: fixed;
                    width: 100%;
                    height: 100%;
                    min-width: 0;
                    min-height: 0;
                  "
                >
                  <thead class="bg-gray-100 text-xs">
                    <tr>
                      <th
                        class="px-2 py-2 border-b text-left font-medium text-gray-500 uppercase tracking-wider text-xs whitespace-nowrap"
                      >
                        <div class="flex items-center gap-1">
                          {{ "NATIONS-table.continentName" | translate }}
                          <button
                            type="button"
                            class="focus:outline-none ml-1"
                            (click)="
                              onSort(
                                'continentName',
                                vm.sortBy === 'continentName' &&
                                  vm.direction === 'asc'
                                  ? 'desc'
                                  : 'asc'
                              )
                            "
                          >
                            <svg
                              *ngIf="vm.sortBy !== 'continentName'"
                              xmlns="http://www.w3.org/2000/svg"
                              class="h-3 w-3 text-gray-400"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke="currentColor"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M19 9l-7 7-7-7"
                              />
                            </svg>
                            <svg
                              *ngIf="
                                vm.sortBy === 'continentName' &&
                                vm.direction === 'asc'
                              "
                              xmlns="http://www.w3.org/2000/svg"
                              class="h-3 w-3 text-blue-600"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke="currentColor"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M19 9l-7 7-7-7"
                              />
                            </svg>
                            <svg
                              *ngIf="
                                vm.sortBy === 'continentName' &&
                                vm.direction === 'desc'
                              "
                              xmlns="http://www.w3.org/2000/svg"
                              class="h-3 w-3 text-blue-600"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke="currentColor"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M5 15l7-7 7 7"
                              />
                            </svg>
                          </button>
                        </div>
                      </th>
                      <th
                        class="px-2 py-2 border-b text-left font-medium text-gray-500 uppercase tracking-wider text-xs whitespace-nowrap"
                      >
                        <div class="flex items-center gap-1">
                          {{ "NATIONS-filter.region" | translate }}
                          <button
                            type="button"
                            class="focus:outline-none ml-1"
                            (click)="
                              onSort(
                                'regionName',
                                vm.sortBy === 'regionName' &&
                                  vm.direction === 'asc'
                                  ? 'desc'
                                  : 'asc'
                              )
                            "
                          >
                            <svg
                              *ngIf="vm.sortBy !== 'regionName'"
                              xmlns="http://www.w3.org/2000/svg"
                              class="h-3 w-3 text-gray-400"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke="currentColor"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M19 9l-7 7-7-7"
                              />
                            </svg>
                            <svg
                              *ngIf="
                                vm.sortBy === 'regionName' &&
                                vm.direction === 'asc'
                              "
                              xmlns="http://www.w3.org/2000/svg"
                              class="h-3 w-3 text-blue-600"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke="currentColor"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M19 9l-7 7-7-7"
                              />
                            </svg>
                            <svg
                              *ngIf="
                                vm.sortBy === 'regionName' &&
                                vm.direction === 'desc'
                              "
                              xmlns="http://www.w3.org/2000/svg"
                              class="h-3 w-3 text-blue-600"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke="currentColor"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M5 15l7-7 7 7"
                              />
                            </svg>
                          </button>
                        </div>
                      </th>
                      <th
                        class="px-2 py-2 border-b text-left font-medium text-gray-500 uppercase tracking-wider text-xs whitespace-nowrap"
                      >
                        <div class="flex items-center gap-1">
                          {{ "NATIONS-table.country" | translate }}
                          <button
                            type="button"
                            class="focus:outline-none ml-1"
                            (click)="
                              onSort(
                                'countryName',
                                vm.sortBy === 'countryName' &&
                                  vm.direction === 'asc'
                                  ? 'desc'
                                  : 'asc'
                              )
                            "
                          >
                            <svg
                              *ngIf="vm.sortBy !== 'countryName'"
                              xmlns="http://www.w3.org/2000/svg"
                              class="h-3 w-3 text-gray-400"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke="currentColor"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M19 9l-7 7-7-7"
                              />
                            </svg>
                            <svg
                              *ngIf="
                                vm.sortBy === 'countryName' &&
                                vm.direction === 'asc'
                              "
                              xmlns="http://www.w3.org/2000/svg"
                              class="h-3 w-3 text-blue-600"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke="currentColor"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M19 9l-7 7-7-7"
                              />
                            </svg>
                            <svg
                              *ngIf="
                                vm.sortBy === 'countryName' &&
                                vm.direction === 'desc'
                              "
                              xmlns="http://www.w3.org/2000/svg"
                              class="h-3 w-3 text-blue-600"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke="currentColor"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M5 15l7-7 7 7"
                              />
                            </svg>
                          </button>
                        </div>
                      </th>
                      <th
                        class="px-2 py-2 border-b text-left font-medium text-gray-500 uppercase tracking-wider text-xs whitespace-nowrap"
                      >
                        <div class="flex items-center gap-1">
                          {{ "NATIONS-table.year" | translate }}
                          <button
                            type="button"
                            class="focus:outline-none ml-1"
                            (click)="
                              onSort(
                                'year',
                                vm.sortBy === 'year' && vm.direction === 'asc'
                                  ? 'desc'
                                  : 'asc'
                              )
                            "
                          >
                            <svg
                              *ngIf="vm.sortBy !== 'year'"
                              xmlns="http://www.w3.org/2000/svg"
                              class="h-3 w-3 text-gray-400"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke="currentColor"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M19 9l-7 7-7-7"
                              />
                            </svg>
                            <svg
                              *ngIf="
                                vm.sortBy === 'year' && vm.direction === 'asc'
                              "
                              xmlns="http://www.w3.org/2000/svg"
                              class="h-3 w-3 text-blue-600"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke="currentColor"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M19 9l-7 7-7-7"
                              />
                            </svg>
                            <svg
                              *ngIf="
                                vm.sortBy === 'year' && vm.direction === 'desc'
                              "
                              xmlns="http://www.w3.org/2000/svg"
                              class="h-3 w-3 text-blue-600"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke="currentColor"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M5 15l7-7 7 7"
                              />
                            </svg>
                          </button>
                        </div>
                      </th>
                      <th
                        class="px-2 py-2 border-b text-left font-medium text-gray-500 uppercase tracking-wider text-xs whitespace-nowrap"
                      >
                        <div class="flex items-center gap-1">
                          {{ "NATIONS-table.population" | translate }}
                          <button
                            type="button"
                            class="focus:outline-none ml-1"
                            (click)="
                              onSort(
                                'population',
                                vm.sortBy === 'population' &&
                                  vm.direction === 'asc'
                                  ? 'desc'
                                  : 'asc'
                              )
                            "
                          >
                            <svg
                              *ngIf="vm.sortBy !== 'population'"
                              xmlns="http://www.w3.org/2000/svg"
                              class="h-3 w-3 text-gray-400"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke="currentColor"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M19 9l-7 7-7-7"
                              />
                            </svg>
                            <svg
                              *ngIf="
                                vm.sortBy === 'population' &&
                                vm.direction === 'asc'
                              "
                              xmlns="http://www.w3.org/2000/svg"
                              class="h-3 w-3 text-blue-600"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke="currentColor"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M19 9l-7 7-7-7"
                              />
                            </svg>
                            <svg
                              *ngIf="
                                vm.sortBy === 'population' &&
                                vm.direction === 'desc'
                              "
                              xmlns="http://www.w3.org/2000/svg"
                              class="h-3 w-3 text-blue-600"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke="currentColor"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M5 15l7-7 7 7"
                              />
                            </svg>
                          </button>
                        </div>
                      </th>
                      <th
                        class="px-2 py-2 border-b text-left font-medium text-gray-500 uppercase tracking-wider text-xs whitespace-nowrap"
                      >
                        <div class="flex items-center gap-1">
                          {{ "NATIONS-table.gdp" | translate }}
                          <button
                            type="button"
                            class="focus:outline-none ml-1"
                            (click)="
                              onSort(
                                'gdp',
                                vm.sortBy === 'gdp' && vm.direction === 'asc'
                                  ? 'desc'
                                  : 'asc'
                              )
                            "
                          >
                            <svg
                              *ngIf="vm.sortBy !== 'gdp'"
                              xmlns="http://www.w3.org/2000/svg"
                              class="h-3 w-3 text-gray-400"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke="currentColor"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M19 9l-7 7-7-7"
                              />
                            </svg>
                            <svg
                              *ngIf="
                                vm.sortBy === 'gdp' && vm.direction === 'asc'
                              "
                              xmlns="http://www.w3.org/2000/svg"
                              class="h-3 w-3 text-blue-600"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke="currentColor"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M19 9l-7 7-7-7"
                              />
                            </svg>
                            <svg
                              *ngIf="
                                vm.sortBy === 'gdp' && vm.direction === 'desc'
                              "
                              xmlns="http://www.w3.org/2000/svg"
                              class="h-3 w-3 text-blue-600"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke="currentColor"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M5 15l7-7 7 7"
                              />
                            </svg>
                          </button>
                        </div>
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr
                      *ngFor="let row of vm.items; let i = index"
                      class="hover:bg-gray-50 transition-colors text-xs"
                      style="height: 40px"
                    >
                      <td
                        class="px-2 py-2 border-b text-gray-900 text-xs whitespace-nowrap"
                        style="overflow: hidden; text-overflow: ellipsis"
                      >
                        {{ row.continentName }}
                      </td>
                      <td
                        class="px-2 py-2 border-b text-gray-900 text-xs whitespace-nowrap"
                        style="overflow: hidden; text-overflow: ellipsis"
                      >
                        {{ row.regionName }}
                      </td>
                      <td
                        class="px-2 py-2 border-b text-gray-900 text-xs whitespace-nowrap"
                        style="overflow: hidden; text-overflow: ellipsis"
                      >
                        {{ row.countryName }}
                      </td>
                      <td
                        class="px-2 py-2 border-b text-gray-900 text-xs whitespace-nowrap"
                        style="overflow: hidden; text-overflow: ellipsis"
                      >
                        {{ row.year }}
                      </td>
                      <td
                        class="px-2 py-2 border-b text-gray-900 text-xs whitespace-nowrap"
                        style="overflow: hidden; text-overflow: ellipsis"
                      >
                        {{ row.population | number }}
                      </td>
                      <td
                        class="px-2 py-2 border-b text-gray-900 text-xs whitespace-nowrap"
                        style="overflow: hidden; text-overflow: ellipsis"
                      >
                        {{ row.gdp | number: "1.0-0" }}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="mt-6">
              <app-pagination
                [config]="vm.paginationConfig"
                (pageChange)="onPageChange($event)"
                (pageSizeChange)="onPageSizeChange($event)"
              ></app-pagination>
            </div>
          </ng-container>
          <ng-template #noData>
            <div class="text-center py-12 text-gray-500 text-lg">
              {{ "NATIONS-countries.list.noCountries" | translate }}
            </div>
          </ng-template>
        </ng-container>
      </div>
    </div>
  </div>
</div>
